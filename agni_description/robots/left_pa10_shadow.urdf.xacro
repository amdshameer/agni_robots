<?xml version="1.0"?>
<robot name="left_pa10_shadow"
     xmlns:xacro="http://www.ros.org/wiki/xacro">
  <xacro:include filename="$(find agni_description)/pa10/pa10-a.urdf.xacro"/> 
  <xacro:include filename="$(find agni_description)/pa10/pa10_shadow_controller_manager.xacro"/> 
  <xacro:include filename="$(find agni_description)/urdf/sr_gazebo.urdf.xacro" /> 
  <xacro:include filename="$(find sr_description)/hand/xacro/full_hand.urdf.xacro" />
  <xacro:include filename="$(find agni_description)/calibration/pa10_cal.xml"/>
  
  <!-- prefix can be true or false to prefix joint names or not -->
  <!-- controller can be true or false to use gazebo controllers or not -->
  <!-- parent is the frame the robot is fixed to -->
  <!-- origin is the position of the robot in this frame -->
  <xacro:macro name="leftpa10shadow" params="parent *origin prefix controller">
    <!-- KUKA arm -->
    <xacro:pa10a_arm name="left_"/>
    <joint name="left_frame_placement" type="fixed">
       <insert_block name="origin" />
      <parent link="${parent}"/>
      <child link="left_arm_base_link"/>
    </joint>  
    
    <xacro:if value="${controller}">  
    <!-- add controllers -->
      <!-- pa10 controllers HERE 
      <xacro:pa10_gazebo_controller_manager namespace="ra"/> ros-hydro-gazebo-ros-control missing-->
      <xacro:pa10_shadow_gazebo_controller_manager namespace="la"/>
      <xacro:shadow_gazebo_controller_manager namespace="lh" />
    </xacro:if>  

    
    <xacro:if value="${prefix}">
      <!-- Shadow Hands --> 
      <xacro:shadowhand muscletrans="false" muscle="false" bio="false" ubi="true" eli="false" reflect="-1.0" prefix="l_"  />
      
      <!-- Link arm and hand -->  
      <joint name="left_arm_hand_mount" type="fixed">
        <parent link="left_arm_hand_mount"/>
        <child link="l_forearm"/>
        <origin xyz="0 0 0.0151" rpy="0 0 1.5707" />
      </joint>
    </xacro:if>  
    <xacro:unless value="${prefix}">
      <xacro:shadowhand muscletrans="false" muscle="false" bio="false" ubi="true" eli="false" reflect="-1.0" prefix=""  />
      <!-- Shadow Hands --> 
      <!-- Link arm and hand -->  
      <joint name="left_arm_hand_mount" type="fixed">
        <parent link="left_arm_hand_mount"/>
        <child link="forearm"/>
        <origin xyz="0 0 0.0151" rpy="0 0 1.5707" />
      </joint>
    </xacro:unless>  
  </xacro:macro>
</robot>
